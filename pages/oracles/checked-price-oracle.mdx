import { Callout, Steps, Step } from "nextra-theme-docs";

# CheckedPriceOracle

The **CheckedPriceOracle** contract is a crucial component in the Gyroscope protocol, responsible for providing reliable and secure asset prices. This oracle performs various checks on the asset prices to ensure that the prices used within the protocol are accurate and free from manipulation.

The CheckedPriceOracle contract serves several important functions:

1. **Fetching USD Prices**: The contract provides the ability to fetch the USD price of any asset through the `getPriceUSD` and `getPricesUSD` functions. These functions ensure that the prices are always scaled with 18 decimals, regardless of the source used for the oracle.

2. **Relative Price Checks**: The contract also fetches the relative price between any two assets using the `getRelativePrice` function from the [IRelativePriceOracle](/oracles/irelative-price-oracle) interface. These relative price checks are crucial for ensuring the consistency of the overall pricing within the protocol.

3. **Price Level Checks**: The contract performs a series of checks on the WETH price to ensure that it is grounded and consistent with prices from trusted external oracles. This helps to prevent potential manipulation or unexpected price movements that could disrupt the protocol's operations.

<Callout type="info">
The price level checks in the CheckedPriceOracle are based on the analysis and algorithms described in the Gyroscope whitepaper. These checks help to ensure the reliability and stability of the protocol's pricing mechanisms.
</Callout>

The CheckedPriceOracle contract is designed to be highly configurable and extensible. It allows the protocol's governance to update the USD and relative price oracles, as well as manage the list of trusted price sources. This flexibility ensures that the protocol can adapt to changes in the DeFi ecosystem and maintain the integrity of its pricing data.

<Steps>
### Step 1: Fetching USD Prices
The `getPriceUSD` and `getPricesUSD` functions in the CheckedPriceOracle contract are used to retrieve the USD price of one or more assets, respectively. These functions ensure that the prices are always scaled with 18 decimals, making it easier to integrate with other parts of the Gyroscope protocol.

### Step 2: Relative Price Checks
The `getRelativePrice` function in the CheckedPriceOracle contract retrieves the relative price between two assets. These relative price checks are crucial for maintaining the consistency of the protocol's pricing mechanisms. The contract also includes functions for managing the list of assets that are used for these relative price checks.

### Step 3: Price Level Checks
The CheckedPriceOracle contract performs a series of checks on the WETH price to ensure that it is grounded and consistent with prices from trusted external oracles. This helps to prevent potential manipulation or unexpected price movements that could disrupt the protocol's operations. The contract uses a robust algorithm to compute the true WETH price based on the signed prices from trusted oracles and the time-weighted average prices (TWAPs) from various sources.
</Steps>

The CheckedPriceOracle contract is a critical component of the Gyroscope protocol, ensuring the reliability and security of the asset prices used throughout the system. Its flexibility and extensibility allow the protocol to adapt to changing market conditions and maintain the integrity of its pricing mechanisms.

For more information on the other core contracts in the Gyroscope protocol, please refer to the [Core Contracts](/core-contracts) section.