import { Callout, Steps, Step } from "nextra-theme-docs";

# FixedPoint

The `FixedPoint` library provides a set of functions for performing fixed-point arithmetic operations in Solidity. Fixed-point numbers are a way to represent fractional values in a contract, where the decimal point is shifted by a fixed number of bits. This allows for more precise calculations compared to using standard integer types.

The library supports the following operations:

- **Addition and Subtraction**: `add`, `sub`, `absSub`
- **Multiplication and Division**: `mulDown`, `divDown`
- **Exponentiation**: `intPowDown`

## Addition and Subtraction

The `add` and `sub` functions perform addition and subtraction of fixed-point numbers, respectively. The `absSub` function calculates the absolute difference between two fixed-point numbers.

```solidity
function add(uint256 a, uint256 b) internal pure returns (uint256) {
    // ...
}

function sub(uint256 a, uint256 b) internal pure returns (uint256) {
    // ...
}

function absSub(uint256 a, uint256 b) internal pure returns (uint256) {
    // ...
}
```

<Callout type="info">
The `add` and `sub` functions use the standard Solidity `+` and `-` operators, respectively. The `absSub` function calculates the absolute difference between the two numbers by subtracting the smaller value from the larger value.
</Callout>

## Multiplication and Division

The `mulDown` and `divDown` functions perform fixed-point multiplication and division, respectively. The `mulDown` function rounds the result down to the nearest integer, while the `divDown` function rounds the result down to the nearest integer.

```solidity
function mulDown(uint256 a, uint256 b) internal pure returns (uint256) {
    // ...
}

function divDown(uint256 a, uint256 b) internal pure returns (uint256) {
    // ...
}
```

<Callout type="info">
The `mulDown` and `divDown` functions use the fixed-point representation to perform the calculations, ensuring that the results are precise and consistent with the expected behavior of fixed-point arithmetic.
</Callout>

## Exponentiation

The `intPowDown` function calculates the integer power of a fixed-point number, rounding the result down to the nearest integer.

```solidity
function intPowDown(uint256 a, uint256 n) internal pure returns (uint256) {
    // ...
}
```

<Callout type="info">
The `intPowDown` function is particularly useful for calculating exponential moving averages and other time-series related calculations in the Gyroscope protocol.
</Callout>

The `FixedPoint` library is an essential component of the Gyroscope protocol, as it enables precise calculations and risk management within the AMM and other core contracts. By using fixed-point arithmetic, the protocol can ensure that token values and prices are accurately represented and that the overall system remains stable and reliable.